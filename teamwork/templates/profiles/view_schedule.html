{% extends 'base.html' %}
{% load staticfiles %}
{% load i18n %}

{# Clear out javascript block at bottom of page so we can import specific js #}
{% block javascript %}
<script src="{% static 'js/jquery-2.2.3.min.js' %}"></script>

<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>

<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
    $.widget.bridge('uibutton', $.ui.button);
</script>

<script src="{% static 'js/bootstrap.min.js' %}"></script>

<script src="{% static 'js/app.min.js' %}"></script>

<!-- Slimscroll -->
<script src="{% static 'js/jquery.slimscroll.min.js' %}"></script>

<script src="{% static 'js/fastclick.js' %}"></script>

<script src="{% static 'js/moment.min.js' %}"></script>

<script src="{% static 'js/fullcalendar.min.js' %}"></script>

<script>
    $('#calendar').fullCalendar({
          // Only show agendaWeek view for edit_schedule
          header: {
            left: 'none',
            center: 'none',
            right: 'none'
          },
          // Day of week shouldn't contain hard coded date.
          columnFormat: 'ddd',
          businessHours: {
              // days of week. an array of zero-based day of week integers (0=Sunday)
              dow: [ 1, 2, 3, 4, 5], // Monday - Friday

              start: '8:00', // a start time (10am in this example)
              end: '22:00', // an end time (6pm in this example)
          },
          defaultView: 'agendaWeek',

          defaultDate: '2017-04-12',

          // Can click day/week names to navigate views
          navLinks: true,

          // Here Sean -andgates
          allDaySlot: false,

          // Allow users to resize events.
          editable: true,

          // Allow "more" link when too many events.
          eventLimit: true,
        
          eventOverlap:false,
          // Allow selection for select function.
          selectable: true,
          selectHelper: true,
          selectConstraint:{
            start: '00:01', 
            end: '23:59', 
          },
          //Double click event to delete

          // Function called on select event.
          // Adapted from https://fullcalendar.io/js/fullcalendar-3.4.0/demos/selectable.html
          select: function(start, end) {
            // Title is always Busy in edit_schedule
            var title = 'Busy';
            // Event Object to be passed to renderEvent
            var eventData;

            // Always true (likely change this to a check for "all day")
            if (title) {
              // Populate the Event Object. TODO: Add attributes.
              eventData = {
                title: title,
                start: start,
                end: end
              };
              // Render the event object with 'stick' set to true
              // so events persist unless page refresh.
              $('#calendar').fullCalendar('renderEvent', eventData, true);

            }
            // Unselct event area before exiting select method.
            $('#calendar').fullCalendar('unselect');
          },

      }) // End fullCalendar initialization.

</script>
{% endblock javascript %}
{% block stylesheets %}

  {{ block.super }}

  <!-- fullCalendar 2.2.5-->
  <link rel="stylesheet" href="{% static 'css/fullcalendar.min.css' %}">
  <link rel="stylesheet" href="{% static 'css/fullcalendar.print.css' %}" media="print">

{% endblock stylesheets %}

{# Add the breadcrumbs for this page #}
{% block crumb %}

{# Breadcrumb for the course that this project is in #}
<li><a href="{% url 'edit_profile' user.username %}"> {{user.username}} </a></li>
{% endblock crumb %}

{% block content %}
<section class="content">

        <div class="alert alert-warning alert-dismissible" id="emptyAlert" style="display:none;">
          <button type="button" class="close" data-dismiss="alert" aria-hidden="true">Ã—</button>
            <h4><i class="icon fa fa-warning"></i> Alert!</h4>
              Did you forget to fill out your schedule?
        </div>
        
              <div class="row">
                  <div class="box box-primary">
                    <div class="box-body no-padding">
                      <!-- THE CALENDAR -->
                      <div id="calendar">
        
                      </div>
                      <!-- /.calendar -->
                    </div>
                    <!-- /.box-body -->
                  </div>
                  <!-- /. box -->
        
        
              </div>
        
        
              <!-- /.row -->
        
        </section>
        
        
        
{% endblock content %}
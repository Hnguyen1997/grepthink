{% extends 'base.html' %}

{% comment %}
{% block crumb %}
<li><a href="{% url 'index' %}">Updates</a></li>
{% endblock crumb %}
{% endcomment %}

{# Contains the page_name, page_description, and breadcrumbs #}
{% block content_header %}
  <section class="content-header">
    <h1>
        {% block page_name %} 
          {{ page_name|default:_('Teamwork') }} 
        {% endblock page_name%}
        {% comment %}
          If you don't want a description, copy this into your template:
          {% block no_description %}{% endblock %}

          http://django-adminlte2.readthedocs.io/en/latest/templates_and_blocks.html#no-description
        {% endcomment %}
        {% block no_description %}

          <small>
            {% block page_description %}
            {{ page_description|default:_('Default Description') }}
            {% endblock page_description %}
          </small>

        {% endblock no_description %}
    </h1>
  </section>
{% endblock content_header %}

{% block content %}

{% block timeline %}
    <ul class="timeline">
        {% for date_update in date_updates %}
        <li class="time-label" style="list-style: none">
            <span class="bg-blue">
                {{ date_update.date }}
            </span>
        </li>
            {% for update in date_update.updates %}
            <li style="list-style: none">
                <i class="fa fa-comments bg-blue"></i>
                <div class="timeline-item">
                    <div class="timeline-header clearfix">
                        {{ update.title }}
                        {% if user == update.creator %}
                        <span class="pull-right">
                            <a href='{% url 'delete_course_update' course.slug update.id %}'>
                                <button class="btn btn-danger btn-xs">
                                    <i class="fa fa-trash"></i>
                                    Delete
                                </button>
                            </a>
                            <a href='{% url 'update_course_update' course.slug update.id %}'>
                                <button class="btn btn-success btn-xs">
                                    <i class="fa fa-edit"></i>
                                    Edit
                                </button>
                            </a>
                        </span>
                        {% endif %}
                    </div>
                    <div class="timeline-body">
                        {{ update.content }}
                    </div>
                    <div class="timeline-footer clearfix">
                        <span class="label label-primary"
                            onclick="window.location =
                            '{% url 'profile' update.creator.username %}'">
                            {{ update.creator.username }}
                        </span>
                        <span class="label label-primary"
                            onclick="window.location =
                            '{% url 'view_one_course' update.course.slug %}'">
                            {{ update.course.name }}
                        </span>
                        <i class="pull-right">
                            Posted {{ update.date_post }}
                            {% if update.date_post != update.date_edit %}
                            , edited {{ update.date_edit }}
                            {% endif %}
                        </i>
                    </div>
                </div>
            </li>
            {% endfor %}
        {% empty %}
        <li style="list-style: none">
            <i class="fa fa-times bg-red"></i>
            <div class="timeline-item"
                style="background-color: #ecf0f5">
                <div class="timeline-header">
                    There are no updates
                </div>
            </div>
        </li>
        {% endfor %}
        <li style="list-style: none">
            <i class="fa fa-clock-o"></i>
        </li>
    </ul>


{% endblock timeline %}


{% endblock content %}
